<template>
  <svg
    viewBox="0 0 160 23"
    style="fill-rule:evenodd;clip-rule:evenodd;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:1.5;"
  >
    <filter id="pixelate" x="0" y="0">
      <feFlood x="0" y="0" height="1" width="1" />
      <feComposite :width="pixelationDisplay" :height="pixelationDisplay" />
      <feTile result="a" />
      <feComposite in="SourceGraphic" in2="a" operator="in" />
      <feMorphology operator="dilate" :radius="pixelationDisplay-1" />
    </filter>
    <g id="pixelater" filter="url(#pixelate)">
      <path
        d="M6.633,22.322l-5.772,0c-0.234,0 -0.436,-0.085 -0.606,-0.255c-0.17,-0.17 -0.255,-0.372 -0.255,-0.606l0,-20.6c0,-0.234 0.085,-0.436 0.255,-0.606c0.17,-0.17 0.372,-0.255 0.606,-0.255l5.836,0c0.595,0 1.052,0.287 1.371,0.861l4.177,7.653l4.177,-7.653c0.319,-0.574 0.776,-0.861 1.372,-0.861l5.835,0c0.234,0 0.436,0.085 0.606,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,20.6c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255l-5.772,0c-0.233,0 -0.435,-0.085 -0.605,-0.255c-0.17,-0.17 -0.256,-0.372 -0.256,-0.606l0,-9.886l-2.327,4.592c-0.128,0.255 -0.319,0.452 -0.574,0.59c-0.255,0.138 -0.51,0.208 -0.766,0.208l-2.168,0c-0.361,0 -0.659,-0.096 -0.893,-0.287c-0.234,-0.192 -0.383,-0.362 -0.446,-0.511l-2.328,-4.592l0,9.886c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255Zm82.686,0l-5.931,0c-0.234,0 -0.436,-0.085 -0.606,-0.255c-0.17,-0.17 -0.255,-0.372 -0.255,-0.606l0,-20.6c0,-0.234 0.085,-0.436 0.255,-0.606c0.17,-0.17 0.372,-0.255 0.606,-0.255l5.166,0c0.51,0 0.925,0.213 1.244,0.638l6.951,9.598l0,-9.375c0,-0.234 0.085,-0.436 0.255,-0.606c0.17,-0.17 0.372,-0.255 0.606,-0.255l5.931,0c0.234,0 0.436,0.085 0.606,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,20.6c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255l-5.134,0c-0.51,0 -0.935,-0.223 -1.275,-0.67l-6.952,-8.865l0,8.674c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255Zm41.678,0l-20.153,0c-0.234,0 -0.436,-0.085 -0.606,-0.255c-0.17,-0.17 -0.255,-0.372 -0.255,-0.606l0,-20.6c0,-0.234 0.085,-0.436 0.255,-0.606c0.17,-0.17 0.372,-0.255 0.606,-0.255l19.834,0c0.234,0 0.436,0.085 0.606,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,4.496c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255l-12.404,0l0,2.009l10.651,0c0.233,0 0.435,0.085 0.605,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,4.146c0,0.234 -0.085,0.435 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.605,0.255l-10.651,0l0,2.009l12.723,0c0.234,0 0.436,0.085 0.606,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,4.496c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255Zm12.405,0l-6.888,0c-0.191,0 -0.356,-0.069 -0.494,-0.207c-0.139,-0.139 -0.208,-0.293 -0.208,-0.463c0,-0.17 0.032,-0.297 0.096,-0.382l7.047,-10.779l-6.282,-9.439c-0.063,-0.085 -0.095,-0.212 -0.095,-0.382c0,-0.17 0.069,-0.325 0.207,-0.463c0.138,-0.138 0.303,-0.207 0.494,-0.207l6.888,0c0.553,0 0.999,0.266 1.339,0.797l2.488,4.082l2.678,-4.146c0.362,-0.489 0.798,-0.733 1.308,-0.733l6.856,0c0.191,0 0.356,0.069 0.494,0.207c0.138,0.138 0.207,0.293 0.207,0.463c0,0.17 -0.032,0.297 -0.095,0.382l-6.665,9.854l6.824,10.364c0.064,0.085 0.096,0.212 0.096,0.382c0,0.17 -0.069,0.324 -0.208,0.463c-0.138,0.138 -0.302,0.207 -0.494,0.207l-6.856,0c-0.574,0 -1.01,-0.245 -1.307,-0.734l-3.093,-4.751l-3.03,4.751c-0.319,0.489 -0.754,0.734 -1.307,0.734Zm-110.079,0l-6.027,0c-0.191,0 -0.356,-0.069 -0.494,-0.207c-0.138,-0.139 -0.207,-0.271 -0.207,-0.399c0,-0.128 0.01,-0.223 0.032,-0.287l6.951,-20.377c0.192,-0.701 0.67,-1.052 1.435,-1.052l8.865,0c0.766,0 1.244,0.351 1.435,1.052l6.952,20.377c0.021,0.064 0.032,0.159 0.032,0.287c0,0.128 -0.069,0.26 -0.207,0.399c-0.139,0.138 -0.303,0.207 -0.495,0.207l-6.027,0c-0.68,0 -1.158,-0.362 -1.435,-1.084l-0.797,-2.233l-7.781,0l-0.797,2.233c-0.276,0.722 -0.754,1.084 -1.435,1.084Zm27.105,0l-6.027,0c-0.191,0 -0.356,-0.069 -0.494,-0.207c-0.138,-0.139 -0.207,-0.271 -0.207,-0.399c0,-0.128 0.011,-0.223 0.032,-0.287l6.951,-20.377c0.192,-0.701 0.67,-1.052 1.435,-1.052l8.865,0c0.766,0 1.244,0.351 1.435,1.052l6.952,20.377c0.021,0.064 0.032,0.159 0.032,0.287c0,0.128 -0.069,0.26 -0.207,0.399c-0.138,0.138 -0.303,0.207 -0.495,0.207l-6.026,0c-0.681,0 -1.159,-0.362 -1.435,-1.084l-0.798,-2.233l-7.78,0l-0.798,2.233c-0.276,0.722 -0.754,1.084 -1.435,1.084Zm-18.718,-9.535l-2.264,-6.633l-2.264,6.633l4.528,0Zm27.105,0l-2.264,-6.633l-2.264,6.633l4.528,0Z"
        style="fill: #00000000;fill-rule:nonzero;"
      />
      <clipPath id="_clip1">
        <path
          d="M6.633,22.322l-5.772,0c-0.234,0 -0.436,-0.085 -0.606,-0.255c-0.17,-0.17 -0.255,-0.372 -0.255,-0.606l0,-20.6c0,-0.234 0.085,-0.436 0.255,-0.606c0.17,-0.17 0.372,-0.255 0.606,-0.255l5.836,0c0.595,0 1.052,0.287 1.371,0.861l4.177,7.653l4.177,-7.653c0.319,-0.574 0.776,-0.861 1.372,-0.861l5.835,0c0.234,0 0.436,0.085 0.606,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,20.6c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255l-5.772,0c-0.233,0 -0.435,-0.085 -0.605,-0.255c-0.17,-0.17 -0.256,-0.372 -0.256,-0.606l0,-9.886l-2.327,4.592c-0.128,0.255 -0.319,0.452 -0.574,0.59c-0.255,0.138 -0.51,0.208 -0.766,0.208l-2.168,0c-0.361,0 -0.659,-0.096 -0.893,-0.287c-0.234,-0.192 -0.383,-0.362 -0.446,-0.511l-2.328,-4.592l0,9.886c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255Zm82.686,0l-5.931,0c-0.234,0 -0.436,-0.085 -0.606,-0.255c-0.17,-0.17 -0.255,-0.372 -0.255,-0.606l0,-20.6c0,-0.234 0.085,-0.436 0.255,-0.606c0.17,-0.17 0.372,-0.255 0.606,-0.255l5.166,0c0.51,0 0.925,0.213 1.244,0.638l6.951,9.598l0,-9.375c0,-0.234 0.085,-0.436 0.255,-0.606c0.17,-0.17 0.372,-0.255 0.606,-0.255l5.931,0c0.234,0 0.436,0.085 0.606,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,20.6c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255l-5.134,0c-0.51,0 -0.935,-0.223 -1.275,-0.67l-6.952,-8.865l0,8.674c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255Zm41.678,0l-20.153,0c-0.234,0 -0.436,-0.085 -0.606,-0.255c-0.17,-0.17 -0.255,-0.372 -0.255,-0.606l0,-20.6c0,-0.234 0.085,-0.436 0.255,-0.606c0.17,-0.17 0.372,-0.255 0.606,-0.255l19.834,0c0.234,0 0.436,0.085 0.606,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,4.496c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255l-12.404,0l0,2.009l10.651,0c0.233,0 0.435,0.085 0.605,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,4.146c0,0.234 -0.085,0.435 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.605,0.255l-10.651,0l0,2.009l12.723,0c0.234,0 0.436,0.085 0.606,0.255c0.17,0.17 0.255,0.372 0.255,0.606l0,4.496c0,0.234 -0.085,0.436 -0.255,0.606c-0.17,0.17 -0.372,0.255 -0.606,0.255Zm12.405,0l-6.888,0c-0.191,0 -0.356,-0.069 -0.494,-0.207c-0.139,-0.139 -0.208,-0.293 -0.208,-0.463c0,-0.17 0.032,-0.297 0.096,-0.382l7.047,-10.779l-6.282,-9.439c-0.063,-0.085 -0.095,-0.212 -0.095,-0.382c0,-0.17 0.069,-0.325 0.207,-0.463c0.138,-0.138 0.303,-0.207 0.494,-0.207l6.888,0c0.553,0 0.999,0.266 1.339,0.797l2.488,4.082l2.678,-4.146c0.362,-0.489 0.798,-0.733 1.308,-0.733l6.856,0c0.191,0 0.356,0.069 0.494,0.207c0.138,0.138 0.207,0.293 0.207,0.463c0,0.17 -0.032,0.297 -0.095,0.382l-6.665,9.854l6.824,10.364c0.064,0.085 0.096,0.212 0.096,0.382c0,0.17 -0.069,0.324 -0.208,0.463c-0.138,0.138 -0.302,0.207 -0.494,0.207l-6.856,0c-0.574,0 -1.01,-0.245 -1.307,-0.734l-3.093,-4.751l-3.03,4.751c-0.319,0.489 -0.754,0.734 -1.307,0.734Zm-110.079,0l-6.027,0c-0.191,0 -0.356,-0.069 -0.494,-0.207c-0.138,-0.139 -0.207,-0.271 -0.207,-0.399c0,-0.128 0.01,-0.223 0.032,-0.287l6.951,-20.377c0.192,-0.701 0.67,-1.052 1.435,-1.052l8.865,0c0.766,0 1.244,0.351 1.435,1.052l6.952,20.377c0.021,0.064 0.032,0.159 0.032,0.287c0,0.128 -0.069,0.26 -0.207,0.399c-0.139,0.138 -0.303,0.207 -0.495,0.207l-6.027,0c-0.68,0 -1.158,-0.362 -1.435,-1.084l-0.797,-2.233l-7.781,0l-0.797,2.233c-0.276,0.722 -0.754,1.084 -1.435,1.084Zm27.105,0l-6.027,0c-0.191,0 -0.356,-0.069 -0.494,-0.207c-0.138,-0.139 -0.207,-0.271 -0.207,-0.399c0,-0.128 0.011,-0.223 0.032,-0.287l6.951,-20.377c0.192,-0.701 0.67,-1.052 1.435,-1.052l8.865,0c0.766,0 1.244,0.351 1.435,1.052l6.952,20.377c0.021,0.064 0.032,0.159 0.032,0.287c0,0.128 -0.069,0.26 -0.207,0.399c-0.138,0.138 -0.303,0.207 -0.495,0.207l-6.026,0c-0.681,0 -1.159,-0.362 -1.435,-1.084l-0.798,-2.233l-7.78,0l-0.798,2.233c-0.276,0.722 -0.754,1.084 -1.435,1.084Zm-18.718,-9.535l-2.264,-6.633l-2.264,6.633l4.528,0Zm27.105,0l-2.264,-6.633l-2.264,6.633l4.528,0Z"
          clip-rule="nonzero"
        />
      </clipPath>
      <g v-for="c of colors" :key="c[0]" clip-path="url(#_clip1)">
        <path
          d="M3.756,22.322l-0.056,-20.964l2.997,3.147l5.548,8.984c0,0 5.749,-11.232 6.715,-11.232c-0.966,0 1.933,-0.787 1.933,-0.787l-0.162,20.852l2.574,5.473l7.047,-5.473l7.434,-22.322l3.181,0l7.615,22.322l5.118,7.117l3.569,-7.117l7.794,-22.322l2.985,0l7.793,22.322l5.936,5.142l4.59,-5.142l-0.026,-22.322l14.296,22.322l-0.077,-22.322l14.345,-13.467l-0.726,13.467l0,26.822l23.955,0.998l1.439,-5.498l20.292,-28.269"
          :style="`fill:none;stroke:${c[0]};stroke-width:7.65px;stroke-dasharray:535.5,535.5,0,0;stroke-dashoffset:${535.5 * (1 - Math.max(0, offset - c[1]))};`"
        />
        <path
          d="M-10.557,-48.408l-4.682,64.547l46.849,-0.529l14.178,0l5.478,-14.809l0.86,14.809l26.571,0l0,-20.124l23.522,-80.014l35.202,80.014l20.814,30.753"
          :style="`fill:none;stroke:${c[0]};stroke-width:7.65px;stroke-dasharray:535.5,535.5,0,0;stroke-dashoffset:${535.5 * (1 - Math.max(0, offset - c[1]))};`"
        />
        <path
          d="M11.117,-173.932l0,232.343l-32.187,87.563l100.523,-8.308l-41.539,-79.753l0,-105.23l3.046,-32.677l24.093,-13.292l0.797,44.584l0,110.215l36.118,59.96l67.829,-5.348l-78.213,-57.305l0,-118.249l14.007,-43.538l0.805,113.131l17.723,0.001l-17.557,42.147l99.359,7.588l-57.378,-17.557l0,-91.384"
          :style="`fill:none;stroke:${c[0]};stroke-width:30px;stroke-dasharray:2100,2100,0,0;stroke-dashoffset:${2100 * (1 - Math.max(0, offset - c[1]))};`"
        />
      </g>
    </g>
  </svg>
</template>

<script lang="ts">
import Vue from 'vue'

export default Vue.extend({
  data () {
    return {
      offset: 0,
      fadeout: 0,
      pixelation: 4,
      pixelationDisplay: 4,
      colors: [
        ['#631953', 0],
        ['#97003E', 0.1],
        ['#D1002E', 0.3],
        ['#E3091B', 0.4],
        ['#EA9F00', 0.6]
      ]
    }
  },
  mounted () {
    setTimeout(this.animation, 500)
  },
  methods: {
    animation () {
      this.offset = 0
      this.fadeout = 0
      this.colors[this.colors.length - 1][0] = '#EA9F00'

      const int = setInterval(() => {
        this.pixelation = Math.max(1, this.pixelation * 0.993)

        if (this.offset >= 1.6) {
          this.fadeout += 0.01
          this.fadeout *= 1.01

          const c0 = [234, 159, 0]
          const c1 = [198, 205, 218]

          Vue.set(this.colors[this.colors.length - 1], 0, `rgb(${this.mix(c0[0], c1[0], this.fadeout)},${this.mix(c0[1], c1[1], this.fadeout)},${this.mix(c0[2], c1[2], this.fadeout)})`)

          if (this.fadeout >= 1) {
            clearInterval(int)
            this.pixelation = 1
          }
        } else {
          this.offset += 0.001
          this.offset *= 1.01
        }

        this.pixelationDisplay = this.pixelation * 10 % 4 === 1 ? 1 : this.pixelation
      })
    },
    mix (n1: number, n2: number, ratio: number): number {
      return n1 + (n2 - n1) * ratio
    }
  }
})
</script>

<style scoped>
@keyframes shake {
  0% { transform: translate(0, 0) }
  10% { transform: translate(-0.6px, -0.4px) }
  20% { transform: translate(0.2px, -0.1px) }
  30% { transform: translate(0.1px, 0.1px) }
  40% { transform: translate(0.3px, -0.3px) }
  50% { transform: translate(-0.1px, 0.2px) }
  60% { transform: translate(0.1px, -0.2px) }
  70% { transform: translate(-0.5px, 0.7px) }
  80% { transform: translate(0.2px, 0.0px) }
  90% { transform: translate(-0.3px, 0.4px) }
  100% { transform: translate(0, 0) }
}
@keyframes shakei {
  0% { transform: translate(0, 0) }
  10% { transform: translate(0.6px, 0.4px) }
  20% { transform: translate(-0.2px, 0.1px) }
  30% { transform: translate(-0.1px, -0.1px) }
  40% { transform: translate(-0.3px, 0.3px) }
  50% { transform: translate(0.1px, -0.2px) }
  60% { transform: translate(-0.1px, 0.2px) }
  70% { transform: translate(0.5px, -0.7px) }
  80% { transform: translate(-0.2px, -0.0px) }
  90% { transform: translate(0.3px, -0.4px) }
  100% { transform: translate(0, 0) }
}
@keyframes svgblink {
  60% { transform: translate(-1.4px, -4px) scaleY(.9); }
  61% { transform: translate(0, 0) scaleY(1); }
  61.5% { opacity: .7; }
  63% { opacity: 1; }
}

#pixelater {
  animation: shake .6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0s 3 forwards normal;
}
path {
  animation: shakei .6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0s 3 forwards normal;
}
svg {
  animation: svgblink 5s cubic-bezier(1, 0, 1, 0) 0s 1 forwards normal;
}
</style>
